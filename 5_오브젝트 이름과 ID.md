# 🧩 Kubernetes Object Names and IDs

> 쿠버네티스의 모든 오브젝트(Object)는  
> 사람이 인식할 수 있는 **이름(Name)** 과  
> 시스템이 내부적으로 관리하는 **고유 식별자(UID)** 를 가진다.

---

## 📘 1. 개요

-   각 오브젝트는 **리소스 유형(kind)** 내에서 **고유한 이름(Name)** 을 가진다.
-   모든 오브젝트는 클러스터 전체에서 **고유한 UID** 를 가진다.
-   같은 이름이라도 리소스 종류(kind)가 다르면 공존할 수 있다.  
    예: `myapp-1234`라는 이름의 **Pod**와 **Deployment**는 동시에 존재 가능.

---

## 🧱 2. 이름 (Name)

> 리소스 URL 경로에 포함되는 **식별 문자열**

예시:

```

/api/v1/pods/some-name

```

-   같은 종류(kind) + 같은 네임스페이스(namespace) 내에서는 이름이 중복될 수 없다.
-   오브젝트를 삭제하면 동일한 이름으로 새로운 오브젝트 생성 가능.
-   API 버전이 달라도 **리소스 그룹 + 종류 + 네임스페이스 + 이름** 조합은 유일해야 한다.

---

### ⚙️ 이름 자동 생성 (`generateName`)

```yaml
metadata:
    generateName: nginx-
```

-   서버가 `nginx-xxxxx` 형태로 고유 이름을 생성한다.
-   충돌 시 HTTP `409 Conflict` 에러 발생 가능.
-   **v1.31 이상**에서는 최대 8회 재시도 후 실패 시 409 반환.

---

### ⚠️ 물리적 리소스 주의 (Node 등)

-   노드 이름을 삭제 없이 재사용하면 쿠버네티스가 이전 노드로 인식할 수 있어 **불일치(inconsistency)** 발생 가능.

---

## 🧭 3. 이름 형식 규칙 (Naming Constraints)

> 이름은 **API URL과 내부 DNS 시스템에 안전하게 포함될 수 있는 형태**여야 한다.

---

### 🌀 (1) DNS Subdomain Name — RFC 1123

-   대부분의 리소스가 사용하는 기본 규칙
-   **형식 조건**

    -   253자 이하
    -   소문자, 숫자, `-`, `.` 만 허용
    -   영숫자로 시작하고 끝나야 함

-   ✅ 예시: `frontend.default.svc.cluster.local`

---

### 🧩 (2) RFC 1123 Label Name

-   일부 리소스는 **RFC 1123 Label** 형식을 사용
-   **형식 조건**

    -   최대 63자
    -   소문자, 숫자, `-`만 허용
    -   영숫자로 시작/끝

-   ✅ 예시: `frontend-app`

---

### 📘 (3) RFC 1035 Label Name

-   몇몇 리소스는 **RFC 1035 Label** 규칙 적용
-   **형식 조건**

    -   최대 63자
    -   소문자, 숫자, `-`만 허용
    -   **반드시 문자로 시작**
    -   영숫자로 끝

-   ✅ 예시: `nginx-demo`
-   🔸 차이점: RFC 1123은 숫자로 시작 가능, RFC 1035는 불가.

---

### 🧱 (4) Path Segment Name

-   일부 리소스는 이름이 **URL 경로 세그먼트에 안전하게 포함**되어야 함.
-   따라서 다음 문자는 **사용 불가**:

    -   `"."`, `".."`, `"/"`, `"%"`

-   ✅ 예시:

    ```yaml
    apiVersion: v1
    kind: Pod
    metadata:
        name: nginx-demo
    ```

---

## 🧬 4. UID (Unique Identifier)

> **UID**는 쿠버네티스가 생성하는 고유한 시스템 식별자

-   클러스터 내 모든 오브젝트는 서로 다른 UID를 가짐
-   이름이 같아도 UID가 다르면 **다른 오브젝트**
-   형태: **UUID (Universally Unique Identifier)**

    ```
    2f1a7c9d-92f6-4b88-9f2b-a29c4e7e1b19
    ```

-   표준:

    -   ISO/IEC 9834-8
    -   ITU-T X.667

---

## 🔍 5. 이름 vs UID 비교

| 구분      | Name                        | UID                                    |
| --------- | --------------------------- | -------------------------------------- |
| 부여 주체 | 사용자                      | 시스템                                 |
| 유효 범위 | kind + namespace            | 클러스터 전체                          |
| 변경 가능 | 삭제 후 재사용 가능         | 불변 (절대 변경 불가)                  |
| 역할      | 사람이 인식하기 쉬운 식별자 | 시스템 내부 추적용 고유 ID             |
| 예시      | `nginx-demo`                | `2f1a7c9d-92f6-4b88-9f2b-a29c4e7e1b19` |

---

## 💡 핵심 요약

> -   **이름(Name)** 은 REST API 경로의 일부이므로
>     → 반드시 DNS 및 URL 표준 형식을 따라야 한다.
> -   **UID** 는 시스템이 생성하는 **절대 중복 없는 식별자**로
>     → 이름이 같아도 UID가 다르면 다른 리소스다.
