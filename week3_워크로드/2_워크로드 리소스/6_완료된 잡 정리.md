## 완료된 잡 정리

성공적으로 끝났거나, 실패로 중단된 잡이더라도, 이것들이 API 서버에 계속 쌓이게 되면 리소스 낭비를 유발한다.

그렇다면 이들을 어떻게 처리할 수 있을까?

---

1. 완료-이후-TTL 컨트롤러

- **완료-이후-TTL 컨트롤러**는 실행이 완료된 리소스(현재는 **잡(Job)만** 해당)의 수명을 제한하는(TTL) 메커니즘을 제공한다.
  - 잡이 완료되면 TTL 이후 잡을 cascading delete를 한다.
  - 즉, 잡과 그에 의존하는 모든 오브젝트(파드)가 함께 삭제된다.
  - 이 삭제 과정에서 finalizer와 같은 정상적인 라이프사이클 절차를 따른다.
- 사용자는 `.spec.ttlSecondsAfterFinished` 필드에 초(sec) 단위를 명시하여 이 기능을 사용한다.

---

2. **경고**

- 자동 파기 기능에는 두 가지 주의사항이 있다.
  - TTL 초(sec) 업데이트
    - TTL이 이미 만료되어 잡을 삭제할 수 있게 된 상태에서 `.spec.ttlSecondsAfterFinished` 필드를 수정(예: 시간 연장)하더라도, 시스템은 그 잡이 **유지되는 것을 보장하지 않는다.**
    - API 업데이트 요청은 '성공'으로 응답을 반환할 수 있지만, 컨트롤러의 삭제 작업이 이미 시작되었다면 막을 수 없다.
  - 시간 차이(Skew)
    - 클러스터 내 노드들의 시간이 동기화되어 있지 않으면, TTL 컨트롤러가 의도한 것보다 너무 이르거나 늦게 잡을 정리할 수 있다.
