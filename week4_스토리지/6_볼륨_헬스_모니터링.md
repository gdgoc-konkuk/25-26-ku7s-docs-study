Container Storage Interface(CSI) 드라이버가 스토리지 시스템 내부의 비정상 상태를 감지해서 관련 PVC나 Pod에 이벤트로 알림을 주는 기능

<aside>

**Container Storage Interface(CSI) 드라이버**: 쿠버네티스가 외부 스토리지를 사용할 수 있게 해주는 플러그인

쿠버네티스 ↔ 스토리지간의 연결을 담당한다.

</aside>

### 구성 요소

- **External Health Monitor Controller**: CSI 드라이버의 상태를 감시해서 이상이 생기면 PVC에 이벤트 보고
- **Kubelet**: 노드에서 연결된 볼륨의 상태를 감시해서 Pod 또는 PVC에 이벤트 보고
  → 노드에서 사용하기 위해서는 기능 게이트 CSIVolumeHealth를 활성화해야 한다.

### 이상 상태?

- 볼륨이 스토리지 시스템에서 손상됨/읽기, 쓰기 오류 발생
- 노드가 장애가 나서 해당 볼륨이 연결된 노드가 작동하지 않음
- 볼륨이 가용 공간을 초과하거나 성능 저하 상태

### 알림 방식

PVC 객체에 이벤트를 기록하는 방식으로 알림

- 노드 측에서 이상 감지 시에는 해당 PVC를 사용하는 Pod에도 이벤트 발생 가능
- `kubelet_volume_stats_health_status_abnormal`이라는 메트릭을 통해 볼륨 헬스 상태 모니터링 가능

→ 현재까지는 알파 기능이기 때문에 자동 복구까지는 안되고, 이상 상태 감지 + 알림 수준까지 가능
